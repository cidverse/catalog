actions:
  - name: java-build
    description: |
      Builds the java module using the configured build system.
    type: container
    container:
      image: quay.io/cidverse/cid-actions-go:latest
      command: central run java-build
    scope: module
    rules:
      - type: cel
        expression: MODULE_BUILD_SYSTEM == "gradle"
      - type: cel
        expression: MODULE_BUILD_SYSTEM == "maven"
  - name: java-test
    description: |
      Tests the java module using the configured build system.
    type: container
    container:
      image: quay.io/cidverse/cid-actions-go:latest
      command: central run java-test
    scope: module
    rules:
      - type: cel
        expression: MODULE_BUILD_SYSTEM == "gradle"
      - type: cel
        expression: MODULE_BUILD_SYSTEM == "maven"
  - name: java-publish
    description: |
      Publishes the java module to the configured maven repository.
    type: container
    container:
      image: quay.io/cidverse/cid-actions-go:latest
      command: central run java-publish
    scope: module
    rules:
      - type: cel
        expression: MODULE_BUILD_SYSTEM == "gradle"
      - type: cel
        expression: MODULE_BUILD_SYSTEM == "maven"
    access:
      env:
      - value: MAVEN_REPO_URL
        description: |
          The URL of the maven repository to publish to.
      - value: MAVEN_REPO_USERNAME
        description: |
          The username to use for authentication with the maven repository.
      - value: MAVEN_REPO_PASSWORD
        description: |
          The password to use for authentication with the maven repository.
      - value: GPG_SIGN_KEYID
        description: |
          The GPG key ID to use for signing the artifacts.
      - value: GPG_SIGN_PRIVATEKEY
        description: |
          The GPG private key to use for signing the artifacts.
      - value: GPG_SIGN_PASSWORD
        description: |
          The GPG password to use for signing the artifacts.
      - value: GITHUB_ACTOR
        description: |
          The GitHub actor to use for pushing the artifacts to a maven repository on GitHub Packages (https://maven.pkg.github.com/).
        internal: true
      - value: GITHUB_TOKEN
        description: |
          The GitHub token to use for pushing the artifacts to a maven repository on GitHub Packages (https://maven.pkg.github.com/).
        internal: true
